{
  "hash": "557e59e59a17b0fb2956b84e26391525",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Week 2 Homework: Asking Questions\"\nwebr:\n  channel-type: 'automatic'\n  packages: [\"ggplot2\", \"dplyr\", \"lubridate\"]\nfilters:\n  - webr\n---\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\nTo receive full points on this homework, please submit a document containing all of the requested screenshots on Brightspace.\n\n# Scenario: You are a data scientist for the LA Lakers!\n\n![2009 NBA Champion LA Lakers](lakers.jpg){fig-alt=\"Picture of the 2008-2009 Season LA Lakers team\"}\n\nFor this week's coding exercise we are going to pretend that you are a data scientist working for the Los Angeles Lakers during the 2009 off-season. You are coming out of a championship win last season and team manager, Mitch Kupchak, and coach, Phil Jackson, now need to decide what changes to make to the roster to set themselves up for success next season. They come to you asking you to do an analysis using data from last season to help them make these tough decisions. In this case, instead of having a question and finding data to address that question, we are given a dataset and are then tasked with asking what questions can we ask with these data?\n\nFor the sake of this tutorial, I am going to tell you that the questions we are going to ask are as follows:\n\n1.  Which players committed the most turnovers?\n\n2.  Across the full season, which quarter did the Lakers seem to struggle most in terms of points scored at home versus away games? Which players missed the most shots in that quarter in home versus away games?\n\n3.  Last season, the Boston Celtics and the Cleveland Cavaliers had higher W/L percentages than the Lakers. Which players performed the best against these teams in terms of points? Assists? Rebounds?\n\n## Getting started\n\nFirst things first, we load our data set and take a look at it. I am only going to show you some of the ways you can explore this dataset, then provide you with a written summary. In reality, you would spend a lot of time taking a look at each column and familiarizing yourself with what the data entail.\n\nMAKE SURE TO RUN THE CODE CHUNK BELOW!\n\n```{webr-r}\n#load the data\nlakers <- lubridate::lakers #this code works because \"lakers\" is a pre-loaded dataset in the R package lubridate\n\n\n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#the glimpse function allows us to take a quick look at the data/data structure\nglimpse(lakers) #all columns are character strings <chr> or integers <int>\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 34,624\nColumns: 13\n$ date      <int> 20081028, 20081028, 20081028, 20081028, 20081028, 20081028, …\n$ opponent  <chr> \"POR\", \"POR\", \"POR\", \"POR\", \"POR\", \"POR\", \"POR\", \"POR\", \"POR…\n$ game_type <chr> \"home\", \"home\", \"home\", \"home\", \"home\", \"home\", \"home\", \"hom…\n$ time      <chr> \"12:00\", \"11:39\", \"11:37\", \"11:25\", \"11:23\", \"11:22\", \"11:22…\n$ period    <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ etype     <chr> \"jump ball\", \"shot\", \"rebound\", \"shot\", \"rebound\", \"shot\", \"…\n$ team      <chr> \"OFF\", \"LAL\", \"LAL\", \"LAL\", \"LAL\", \"LAL\", \"POR\", \"LAL\", \"LAL…\n$ player    <chr> \"\", \"Pau Gasol\", \"Vladimir Radmanovic\", \"Derek Fisher\", \"Pau…\n$ result    <chr> \"\", \"missed\", \"\", \"missed\", \"\", \"made\", \"\", \"made\", \"\", \"mad…\n$ points    <int> 0, 0, 0, 0, 0, 2, 0, 1, 0, 2, 2, 0, 0, 2, 2, 0, 0, 2, 0, 0, …\n$ type      <chr> \"\", \"hook\", \"off\", \"layup\", \"off\", \"hook\", \"shooting\", \"\", \"…\n$ x         <int> NA, 23, NA, 25, NA, 25, NA, NA, NA, 36, 30, 34, NA, 15, 46, …\n$ y         <int> NA, 13, NA, 6, NA, 10, NA, NA, NA, 21, 21, 10, NA, 17, 9, 10…\n```\n\n\n:::\n\n```{.r .cell-code}\n#the head function prints the first six rows of the data\nhead(lakers)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      date opponent game_type  time period     etype team              player\n1 20081028      POR      home 12:00      1 jump ball  OFF                    \n2 20081028      POR      home 11:39      1      shot  LAL           Pau Gasol\n3 20081028      POR      home 11:37      1   rebound  LAL Vladimir Radmanovic\n4 20081028      POR      home 11:25      1      shot  LAL        Derek Fisher\n5 20081028      POR      home 11:23      1   rebound  LAL           Pau Gasol\n6 20081028      POR      home 11:22      1      shot  LAL           Pau Gasol\n  result points  type  x  y\n1             0       NA NA\n2 missed      0  hook 23 13\n3             0   off NA NA\n4 missed      0 layup 25  6\n5             0   off NA NA\n6   made      2  hook 25 10\n```\n\n\n:::\n\n```{.r .cell-code}\n#we can look at the unique values for specific columns using the unique function and the $ operator\nunique(lakers$etype) #the type of plays recorded\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"jump ball\"  \"shot\"       \"rebound\"    \"foul\"       \"free throw\"\n [6] \"turnover\"   \"timeout\"    \"sub\"        \"violation\"  \"ejection\"  \n```\n\n\n:::\n:::\n\n\nNOTE: the \"\\$\" operator allows us to select a column within a dataframe. In the above code chunk, we used the unique() function on the etype column by typing lakers\\$etype, which basically says look in the lakers dataframe for the etype column.\n\nWe see that our data includes game logs from the entire season with the following variables:\n\n-   date: Date of the game\n\n-   opponent: Three letter code for the opponent team the Lakers played against\n\n-   game_type: Whether the game was home or away\n\n-   time: The time on the game clock when the play was recorded (i.e. time left in the quarter)\n\n-   period: Quarter of the game (1, 2, 3, 4, 5), with 5 representing overtime\n\n-   etype: Type of play recorded\n\n-   team: The team that made the play\n\n-   player: The player that made the play\n\n-   result: The result of the play - blank for non-shots, \"missed\" or \"made\" for shots\n\n-   points: Number of points the play resulted in\n\n-   type: Type of play - type of foul for fouls, type of shot for shots, type of rebound for rebounds\n\n-   x: The location along the x plane (court width) of the play (shots only)\n\n-   y: The location along the y plane (court length) of the play (shots only)\n\n## Question 1: Who committed the most turnovers?\n\nFor this first question, I will walk you through how to find the answer, showing you some important data wrangling tools along the way. We will spend A LOT more time exploring these tools in future weeks, so don't worry too much if you don't follow all the code.\n\n-   Which players committed the most turnovers?\n\nTo answer this, we first need to do some data filtering. We are only interested in plays made by the Lakers, so we need to filter the data to only include \"LAL\" observations in the \"team\" column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#filter the data so we only have plays made by the Lakers\nlakersQ1 <- lakers %>%  #that weird symbol is called a pipe, you can imagine it means \"and then\"\n  filter(team == \"LAL\") #NOTE: this is the dplyr package filter, not the base R filter\n\n#check to see if that worked\nunique(lakersQ1$team) #should only print \"LAL\"\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"LAL\"\n```\n\n\n:::\n:::\n\n\nIn the above code chunk I introduced a new coding operator, the pipe, denoted by \"%\\>%\" or \"\\|\\>\". You can imagine this translating to \"and then\". We are creating a new object called lakersQ1. To create this object we take the lakers data \"and then\" we filter it so that the \"team\" column only includes \"LAL\". We use == when filtering character strings, and = when filtering numeric or integer values.\n\nNow that we have done that, we need to determine which players committed the most turnovers. We can again accomplish this using filtering.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#only pull data related to turnovers\nlakersQ1 <- lakersQ1 %>% #NOTE: we are overwriting our original lakersQ1 object when we assign this code to an object of the same name\n  filter(etype == \"turnover\") \n\n#take a look at the first 6 rows to see what it says\nhead(lakersQ1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n      date opponent game_type  time period    etype team              player\n1 20081028      POR      home 08:15      1 turnover  LAL         Kobe Bryant\n2 20081028      POR      home 03:21      1 turnover  LAL Vladimir Radmanovic\n3 20081028      POR      home 02:52      1 turnover  LAL          Lamar Odom\n4 20081028      POR      home 01:12      1 turnover  LAL       Jordan Farmar\n5 20081028      POR      home 06:50      2 turnover  LAL         Kobe Bryant\n6 20081028      POR      home 02:35      2 turnover  LAL        Derek Fisher\n  result points type  x  y\n1             0      NA NA\n2             0      NA NA\n3             0      NA NA\n4             0      NA NA\n5             0      NA NA\n6             0      NA NA\n```\n\n\n:::\n:::\n\n\nIn the above code chunk, we used the pipe filter for only observations of turnovers.\n\nNow we can create a visualization to see who committed the most turnovers.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(lakersQ1, aes(x = player)) + #create a ggplot with the lakersQ1 data with player as the x axis\n  geom_bar() + #plot a bar plot\n  theme_bw() + #add a theme\n  labs(x = \"Player\", y = \"Turnover Count\") + #change the x and y axis labels\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) #adjust the x axis labels so we can read the player names\n```\n\n::: {.cell-output-display}\n![](Week2HW_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nWe see that Kobe Bryant, Pau Gasol, and Lamar Odom committed the most turnovers across the season. Assuming you know nothing about basketball, I will tell you that these are three of the biggest stars on this championship team. This means they probably got waayyyy more playing time than the other players, giving them more opportunity to commit a turnover in the first place. This is an important lesson for multiple reasons:\n\n1.  You should always evaluate your results to see if they make sense in the context of the bigger picture. Kobe Bryant is one of the greatest NBA players of all time and played with the Lakers his entire 20 year career–he obviously would never get traded.\n\n2.  Sometimes folks you are working with think they want the answer to one question (who committed the most turnovers?), but what they really want is the answer to a different question.\n\nWhat's something we could do to make this a fairer picture of turnover rates ?\n\n```{webr-r}\n#WRITE YOUR ANSWER TO THE ABOVE QUESTION HERE AND SCREENSHOT\n\n```\n\n## Question 2: Who contributed to low scoring quarters?\n\nLet's move on to the second question.\n\n-   Across the full season, which quarter did the Lakers seem to struggle most in terms of points scored at home versus away games? Which players missed the most shots in that quarter in home versus away games?\n\nFirst thing we have to do is identify which quarter was the lowest scoring across the season. We will do this by again filtering so that we only have rows including information on plays by the Lakers.\n\nAdjust the following code chunk so that you create an object called \"lakersQ2\" that filters for only plays made by the Lakers. If you get this right, the next two code chunks should run smoothly. (HINT: Look back at how we tackled this task in the first question.)\n\n```{webr-r}\nlakersQ2 <- lakers %>% \n  filter([FILL ME IN]) #REPLACE [FILL ME IN] WITH YOUR RESPONSE\n\n#check that worked\nunique([FILL ME IN]) #REPLACE [FILL ME IN] WITH YOUR RESPONSE\n```\n\nNow we are going to calculate the number of points scored each quarter each game, excluding overtime. I'll write this code for you, just run the following chunk.\n\n```{webr-r}\nlakersQ2 <- lakersQ2 %>% #use the object you just created and overwrite it\n  filter(period != 5) %>% #remove overtime\n  group_by(date, opponent, period) %>% #group observations based on the date, opponent, and quarter\n  summarize(score = sum(points)) #based on the grouping find the sum of all points scored\n\nhead(lakersQ2)\n```\n\nIn the above code chunk, I introduce a new, very important combination of functions: group_by() and summarize(). This allows us to group data based on one or more columns, basically creating a category, that we can then calculate summary statistics for. In this case we are identifying indivdual games by grouping by date and opponent and then also grouping by period, to create a unique category for each quarter in each game. We then use summarize() and the sum() functions to calculate the total number of points scored in each quarter in each game. You'll notice our dataframe is greatly simplified now, only including our grouping columns and the new column, \"score\", that we created.\n\nI will now generate a boxplot summarizing these data. Again, just run this chunk.\n\n```{webr-r}\nggplot(lakersQ2, aes(x = as.factor(period), y = score, \n                     fill = as.factor(period), color = as.factor(period))) +\n  geom_jitter(width = 0.25) +\n  geom_boxplot(alpha = 0.5) +\n  theme_bw() +\n  labs(x = \"Quarter\", y = \"Points Scored\")\n\n```\n\n## Question 3: Who performed highest against the best opposing teams?\n\n## Concluding remarks\n\nObviously this is a very simplified example, but these types of analyses actually go on behind the scenes for most sports teams. Based on our very limited analysis who would you say the Lakers should trade? Who should they keep? Why?\n\n```{webr-r}\n#WRITE YOUR ANSWER TO THE ABOVE QUESTION HERE AND SCREENSHOT\n\n```\n\nThere are much more complicated questions we could ask and analyses we could perform with these data as well. We stuck with questions directly related to the variables present, but we can also take these data another step using data manipulation and analysis tools. Even though the active court lineup is not provided, we could deduce which players were on the court at certain times and ask something like which lineup led to the most points scored? Or which lineup led to the most missed shots by the other team? We could also try predicting outcomes using these data. What is the probability of the Lakers winning a game given the number of minutes Kobe Bryant plays in the first half? How well can we predict whether the Lakers win or not based on the starting lineup, number of points in the first quarter, and number of shots given up to the other team?\n\nWhat is another more complex question you could answer using these data?\n\n```{webr-r}\n#WRITE YOUR ANSWER TO THE ABOVE QUESTION HERE AND SCREENSHOT\n\n```\n\nAs we move through this semester, we will try to build your skills so that you can start trying to address these types of more complex data science questions.\n",
    "supporting": [
      "Week2HW_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}